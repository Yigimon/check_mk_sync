<!DOCTYPE html>
<html lang="de">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--><meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" href="/favicon.png">
<meta name="description" content="Hier erfahren Sie, wie Sie Spezialagenten entwickeln, mit denen Sie Daten aus einer beliebigen Quelle in eine Checkmk-Agentenausgabe und so in das Monitoring überführen.">
<meta name="og:locale" content="de">
<meta name="og:site_name" content="Checkmk Docs">
<meta name="og:title" content="Spezialagenten entwickeln">
<meta name="og:description" content="Hier erfahren Sie, wie Sie Spezialagenten entwickeln, mit denen Sie Daten aus einer beliebigen Quelle in eine Checkmk-Agentenausgabe und so in das Monitoring überführen.">
<meta name="og:image" content="https://docs.checkmk.com/assets/images/share_image.png">
<meta name="twitter:site" content="@checkmk">
<meta name="twitter:creator" content="@checkmk">
<title>Spezialagenten entwickeln</title>
<link rel="stylesheet" href="../../assets/css/checkmk.css?id=4473d2acbb1ea6136428">
<link rel="stylesheet" href="../../assets/css/pygments-monokai.css">
<link rel="stylesheet" href="../../assets/css/addons.css">
<link rel="stylesheet" href="../../assets/css/SourceCodePro.css">
<link rel="search" href="./opensearch.xml" type="application/opensearchdescription+xml" title="Suche auf docs.checkmk.com">
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NJ3VGL8');</script>
<!-- End Google Tag Manager --><style>
#staticinfo { font-style: italic; }
</style>
</head>
<body class="article toc2 toc-right">
<!-- Cookie Consent (GDPR Compliance) -->

<!-- End Cookie Consent (GDPR Compliance) -->
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NJ3VGL8" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) --><div class="header-top">
<div class="header-top__left">
<a class="header-top__logo d-none d-xl-inline-block" href="/latest/de"><img src="../../assets/images/docs_logo.png" alt="Checkmk"></a><a class="header-top__icon d-inline-block d-xl-none" href="/latest/de"><img src="../../assets/images/logo_icon.svg" alt="Checkmk"></a>
</div>
<div class="header-top__center">
<input type="text" class="header-top__search" placeholder="Search the checkmk docs"><div class="header-top__search__results"></div>
</div>
<div class="header-top__right d-block">
<button class="header-top__search__toggle d-inline-block d-md-none"><img class="header-top__search__toggle__icon" src="../../assets/images/search.svg" alt="Search"></button><div class="dropdown dropdown__language">
                    <button class="btn dropdown-toggle" type="button" id="languageMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">de</button>
                    <div class="dropdown-menu  dropdown-menu-right" aria-labelledby="languageMenuButton"><a class="dropdown-item" href="../../latest/en/devel_special_agents.html">English</a></div>
</div>
<div class="dropdown dropdown__branch">
                        <button class="btn dropdown-toggle" type="button" id="branchMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">latest (2.3.0)</button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="branchMenuButton">
<a class="dropdown-item" href="../../2.1.0/de/devel_special_agents.html">2.1.0</a><a class="dropdown-item" href="../../2.2.0/de/devel_special_agents.html">2.2.0</a>
</div>
</div>
<a class="header-top__back d-none d-lg-inline-block" href="https://checkmk.com">to checkmk.com</a><button class="header-top__toggle d-inline-block d-lg-none"><span class="header-top__toggle__icon"></span></button>
</div>
</div>
<aside><div class="main-nav">
<div class="main-nav__content"><div id="content">
<div class="sect1">
<h2 id="_willkommen_bei_checkmk">
<a class="anchor" href="#_willkommen_bei_checkmk"></a>1. Willkommen bei Checkmk</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="welcome.html">Willkommen im Checkmk Handbuch</a></p>
</li>
<li>
<p><a href="release_notes.html">Release notes</a></p>
</li>
<li>
<p><a href="glossar.html">Glossar</a></p>
</li>
<li>
<p><a href="search.html">Suchen in docs.checkmk.com</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_leitfaden_für_einsteiger">
<a class="anchor" href="#_leitfaden_f%C3%BCr_einsteiger"></a>2. Leitfaden für Einsteiger</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="intro_setup.html">Checkmk aufsetzen</a></p>
</li>
<li>
<p><a href="intro_gui.html">Die Checkmk-Oberfläche</a></p>
</li>
<li>
<p><a href="intro_setup_monitor.html">Das Monitoring einrichten</a></p>
</li>
<li>
<p><a href="intro_tools.html">Die Monitoring-Werkzeuge</a></p>
</li>
<li>
<p><a href="intro_monitor.html">Checkmk im Monitoring</a></p>
</li>
<li>
<p><a href="intro_finetune.html">Das Monitoring feinjustieren</a></p>
</li>
<li>
<p><a href="intro_users.html">Mit mehreren Benutzern arbeiten</a></p>
</li>
<li>
<p><a href="intro_notifications.html">Benachrichtigungen einschalten</a></p>
</li>
<li>
<p><a href="intro_extend.html">Das Monitoring weiter ausbauen</a></p>
</li>
<li>
<p><a href="intro_bestpractise.html">Best Practices, Tipps &amp; Tricks</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">
<a class="anchor" href="#_installation"></a>3. Installation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="install_packages.html">Grundsätzliches zur Installation von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_server_und_vms">
<a class="anchor" href="#_server_und_vms"></a>3.1. Server und VMs</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_packages_debian.html">Installation unter Debian und Ubuntu</a></p>
</li>
<li>
<p><a href="install_packages_redhat.html">Installation unter Red Hat Enterprise Linux</a></p>
</li>
<li>
<p><a href="install_packages_sles.html">Installation unter SUSE Linux Enterprise Server</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_appliance_container_cloud">
<a class="anchor" href="#_appliance_container_cloud"></a>3.2. Appliance, Container, Cloud</h3>
<div class="ulist">
<ul>
<li>
<p><a href="install_appliance_cmk.html">Installation von Checkmk in der Appliance</a></p>
</li>
<li>
<p><a href="introduction_docker.html">Installation als Docker-Container</a></p>
</li>
<li>
<p><a href="install_azure.html">Installation aus dem Azure Marketplace</a></p>
</li>
<li>
<p><a href="install_aws.html">Installation aus dem AWS Marketplace</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_updates">
<a class="anchor" href="#_updates"></a>3.3. Updates</h3>
<div class="ulist">
<ul>
<li>
<p><a href="update.html">Updates und Upgrades</a></p>
</li>
<li>
<p><a href="update_major.html">Update auf Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="update_matrix.html">Update-Matrix für Version <span class="new">2.3.0</span></a></p>
</li>
<li>
<p><a href="release_upgrade.html">Linux-Upgrade auf dem Checkmk-Server</a></p>
</li>
<li>
<p><a href="cmk_versions.html">Checkmk-Versionen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_administration_von_checkmk">
<a class="anchor" href="#_administration_von_checkmk"></a>4. Administration von Checkmk</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_server">
<a class="anchor" href="#_server"></a>4.1. Server</h3>
<div class="ulist">
<ul>
<li>
<p><a href="saml.html">Anmeldung mit SAML</a></p>
</li>
<li>
<p><a href="kerberos.html">Single Sign-On mit Kerberos</a></p>
</li>
<li>
<p><a href="managing_docker.html">Checkmk-Server im Docker-Container</a></p>
</li>
<li>
<p><a href="security.html">Sicherheit (Security)</a></p>
</li>
<li>
<p><a href="ports.html">Ports</a></p>
</li>
<li>
<p><a href="omd_https.html">Weboberfläche mit HTTPS absichern</a></p>
</li>
<li>
<p><a href="support_diagnostics.html">Support Diagnostics</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_instanzen">
<a class="anchor" href="#_instanzen"></a>4.2. Instanzen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="omd_basics.html">Instanzen (Sites) mit omd verwalten</a></p>
</li>
<li>
<p><a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a></p>
</li>
<li>
<p><a href="license.html">Lizenzen verwalten</a></p>
</li>
<li>
<p><a href="distributed_monitoring.html">Verteiltes Monitoring</a></p>
</li>
<li>
<p><a href="backup.html">Backups</a></p>
</li>
<li>
<p><a href="password_store.html">Passwortspeicher (Password store)</a></p>
</li>
<li>
<p><a href="analyze_configuration.html">Konfiguration der Checkmk Instanz analysieren</a></p>
</li>
<li>
<p><a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a></p>
</li>
<li>
<p><a href="mkp_viewables.html">MKPs für GUI-Erweiterungen</a></p>
</li>
<li>
<p><a href="simulation_mode.html">Der Simulationsmodus</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konfiguration">
<a class="anchor" href="#_konfiguration"></a>5. Konfiguration</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato.html">Die Konfiguration von Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_hosts">
<a class="anchor" href="#_hosts"></a>5.1. Hosts</h3>
<div class="ulist">
<ul>
<li>
<p><a href="hosts_setup.html">Verwaltung der Hosts</a></p>
</li>
<li>
<p><a href="hosts_structure.html">Strukturierung der Hosts</a></p>
</li>
<li>
<p><a href="host_tags.html">Host-Merkmale</a></p>
</li>
<li>
<p><a href="dcd.html">Dynamische Host-Konfiguration</a></p>
</li>
<li>
<p><a href="hosts_autoregister.html">Automatisch Hosts erstellen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_services">
<a class="anchor" href="#_services"></a>5.2. Services</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_services.html">Services verstehen und konfigurieren</a></p>
</li>
<li>
<p><a href="clustered_services.html">Cluster-Services überwachen</a></p>
</li>
<li>
<p><a href="piggyback.html">Der Piggyback-Mechanismus</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_regeln">
<a class="anchor" href="#_regeln"></a>5.3. Regeln</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_rules.html">Regeln</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_unterstützende_konfigurationen">
<a class="anchor" href="#_unterst%C3%BCtzende_konfigurationen"></a>5.4. Unterstützende Konfigurationen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="timeperiods.html">Zeitperioden (Time Periods)</a></p>
</li>
<li>
<p><a href="labels.html">Labels</a></p>
</li>
<li>
<p><a href="regexes.html">Reguläre Ausdrücke in Checkmk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benutzer_und_berechtigungen">
<a class="anchor" href="#_benutzer_und_berechtigungen"></a>5.5. Benutzer und Berechtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="wato_user.html">Benutzer, Zuständigkeiten, Berechtigungen</a></p>
</li>
<li>
<p><a href="ldap.html">Benutzerverwaltung mit LDAP/Active Directory</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_benachrichtigungen">
<a class="anchor" href="#_benachrichtigungen"></a>5.6. Benachrichtigungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="notifications.html">Benachrichtigungen</a></p>
</li>
<li>
<p><a href="notifications_webex.html">Benachrichtigungen per Cisco Webex Teams</a></p>
</li>
<li>
<p><a href="notifications_ilert.html">Benachrichtigungen per ilert</a></p>
</li>
<li>
<p><a href="notifications_jira.html">Benachrichtigungen per Jira</a></p>
</li>
<li>
<p><a href="notifications_mattermost.html">Benachrichtigungen per Mattermost</a></p>
</li>
<li>
<p><a href="notifications_teams.html">Benachrichtigungen per Microsoft Teams</a></p>
</li>
<li>
<p><a href="notifications_pagerduty.html">Benachrichtigungen per PagerDuty</a></p>
</li>
<li>
<p><a href="notifications_pushover.html">Benachrichtigungen per Pushover</a></p>
</li>
<li>
<p><a href="notifications_opsgenie.html">Benachrichtigungen per Opsgenie</a></p>
</li>
<li>
<p><a href="notifications_servicenow.html">Benachrichtigungen per ServiceNow</a></p>
</li>
<li>
<p><a href="notifications_signl4.html">Benachrichtigungen per SIGNL4</a></p>
</li>
<li>
<p><a href="notifications_slack.html">Benachrichtigungen per Slack</a></p>
</li>
<li>
<p><a href="notifications_splunkoncall.html">Benachrichtigungen per Splunk On-Call</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_events">
<a class="anchor" href="#_events"></a>5.7. Events</h3>
<div class="ulist">
<ul>
<li>
<p><a href="ec.html">Die Event Console</a></p>
</li>
<li>
<p><a href="alert_handlers.html">Alert Handler</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_überwachung_von_systemen">
<a class="anchor" href="#_%C3%BCberwachung_von_systemen"></a>6. Überwachung von Systemen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="wato_monitoringagents.html">Monitoring-Agenten</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_checkmk_agenten_und_snmp">
<a class="anchor" href="#_checkmk_agenten_und_snmp"></a>6.1. Checkmk-Agenten und SNMP</h3>
<div class="ulist">
<ul>
<li>
<p><a href="agent_deployment.html">Automatische Agenten-Updates</a></p>
</li>
<li>
<p><a href="agent_linux.html">Linux überwachen</a></p>
</li>
<li>
<p><a href="agent_linux_legacy.html">Linux überwachen im Legacy-Modus</a></p>
</li>
<li>
<p><a href="agent_windows.html">Windows überwachen</a></p>
</li>
<li>
<p><a href="agent_freebsd.html">FreeBSD überwachen</a></p>
</li>
<li>
<p><a href="snmp.html">Überwachen via SNMP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_agentenerweiterungen">
<a class="anchor" href="#_agentenerweiterungen"></a>6.2. Agentenerweiterungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="inventory.html">Die HW/SW-Inventur</a></p>
</li>
<li>
<p><a href="mk_filestats.html">Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_logfiles.html">Log-Dateien überwachen</a></p>
</li>
<li>
<p><a href="monitoring_oracle.html">Oracle-Datenbanken überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mysql.html">MySQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql.html">MSSQL überwachen</a></p>
</li>
<li>
<p><a href="monitoring_mssql_legacy.html">MSSQL mit dem Legacy-Plugin überwachen</a></p>
</li>
<li>
<p><a href="monitoring_jobs.html">Zeitbasierte Prozesse (Cronjobs) überwachen</a></p>
</li>
<li>
<p><a href="spool_directory.html">Das Spool-Verzeichnis</a></p>
</li>
<li>
<p><a href="localchecks.html">Lokale Checks</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_vm_cloud_container">
<a class="anchor" href="#_vm_cloud_container"></a>6.3. VM, Cloud, Container</h3>
<div class="ulist">
<ul>
<li>
<p><a href="datasource_programs.html">Datenquellenprogramme</a></p>
</li>
<li>
<p><a href="monitoring_vmware.html">VMware ESXi überwachen</a></p>
</li>
<li>
<p><a href="monitoring_aws.html">Amazon Web Services (AWS) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_azure.html">Microsoft Azure überwachen</a></p>
</li>
<li>
<p><a href="monitoring_gcp.html">Google Cloud Platform (GCP) überwachen</a></p>
</li>
<li>
<p><a href="monitoring_kubernetes.html">Kubernetes überwachen</a></p>
</li>
<li>
<p><a href="monitoring_openshift.html">OpenShift überwachen</a></p>
</li>
<li>
<p><a href="monitoring_docker.html">Docker überwachen</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_endpunkte">
<a class="anchor" href="#_endpunkte"></a>6.4. Endpunkte</h3>
<div class="ulist">
<ul>
<li>
<p><a href="active_checks.html">Netzwerkdienste überwachen (Aktive Checks)</a></p>
</li>
<li>
<p><a href="robotmk.html">Checkmk Synthetic Monitoring mit Robotmk</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dashboards_views_metriken">
<a class="anchor" href="#_dashboards_views_metriken"></a>7. Dashboards, Views, Metriken</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="user_interface.html">Die Benutzeroberfläche</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_allgemein">
<a class="anchor" href="#_allgemein"></a>7.1. Allgemein</h3>
<div class="ulist">
<ul>
<li>
<p><a href="views.html">Ansichten von Hosts und Services (Views)</a></p>
</li>
<li>
<p><a href="dashboards.html">Dashboards</a></p>
</li>
<li>
<p><a href="graphing.html">Messwerte und Graphing</a></p>
</li>
<li>
<p><a href="custom_notes.html">Anmerkungen (Custom notes)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kommandos_in_ansichten">
<a class="anchor" href="#_kommandos_in_ansichten"></a>7.2. Kommandos in Ansichten</h3>
<div class="ulist">
<ul>
<li>
<p><a href="commands.html">Kommandos</a></p>
</li>
<li>
<p><a href="basics_ackn.html">Quittierung von Problemen</a></p>
</li>
<li>
<p><a href="basics_downtimes.html">Wartungszeiten</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_auswertungen_und_prognosen">
<a class="anchor" href="#_auswertungen_und_prognosen"></a>8. Auswertungen und Prognosen</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_auswertungen">
<a class="anchor" href="#_auswertungen"></a>8.1. Auswertungen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="availability.html">Verfügbarkeit (Availability)</a></p>
</li>
<li>
<p><a href="sla.html">Erweiterte Verfügbarkeiten (SLAs)</a></p>
</li>
<li>
<p><a href="bi.html">Business Intelligence (BI)</a></p>
</li>
<li>
<p><a href="reporting.html">Berichte (Reports)</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_prognosen">
<a class="anchor" href="#_prognosen"></a>8.2. Prognosen</h3>
<div class="ulist">
<ul>
<li>
<p><a href="predictive_monitoring.html">Prognosebasiertes Monitoring</a></p>
</li>
<li>
<p><a href="forecast_graphs.html">Vorhersagegraphen erstellen</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anbindung_anderer_applikationen">
<a class="anchor" href="#_anbindung_anderer_applikationen"></a>9. Anbindung anderer Applikationen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_prometheus.html">Prometheus integrieren</a></p>
</li>
<li>
<p><a href="integrating_datadog.html">Datadog integrieren</a></p>
</li>
<li>
<p><a href="nagvis.html">NagVis: Statusdaten auf Karten und Diagrammen</a></p>
</li>
<li>
<p><a href="ntop.html">ntopng in Checkmk integrieren</a></p>
</li>
<li>
<p><a href="grafana.html">Checkmk in Grafana integrieren</a></p>
</li>
<li>
<p><a href="metrics_exporter.html">Metriken an InfluxDB und Graphite senden</a></p>
</li>
<li>
<p><a href="nagstamon.html">Nagstamon mit Checkmk verbinden</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_besonderheiten_in_den_editionen">
<a class="anchor" href="#_besonderheiten_in_den_editionen"></a>10. Besonderheiten in den Editionen</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="cse.html">Checkmk Enterprise</a></p>
</li>
<li>
<p><a href="cce.html">Checkmk Cloud</a></p>
</li>
<li>
<p><a href="managed.html">Checkmk MSP</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_automatisierung_und_programmierung">
<a class="anchor" href="#_automatisierung_und_programmierung"></a>11. Automatisierung und Programmierung</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="apis_intro.html">Übersicht der API-Ressourcen</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_apis_zur_automatisierung">
<a class="anchor" href="#_apis_zur_automatisierung"></a>11.1. APIs zur Automatisierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="rest_api.html">Die Checkmk REST-API</a></p>
</li>
<li>
<p><a href="livestatus.html">Statusdaten abrufen via Livestatus</a></p>
</li>
<li>
<p><a href="livestatus_references.html">Livestatus Befehlsreferenz</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_apis_zur_programmierung">
<a class="anchor" href="#_apis_zur_programmierung"></a>11.2. APIs zur Programmierung</h3>
<div class="ulist">
<ul>
<li>
<p><a href="bakery_api.html">Die Bakery-API</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_programmierung_von_check_plugins">
<a class="anchor" href="#_programmierung_von_check_plugins"></a>11.3. Programmierung von Check-Plugins</h3>
<div class="ulist">
<ul>
<li>
<p><a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a></p>
</li>
<li>
<p><a href="devel_check_plugins.html">Agentenbasierte Check-Plugins schreiben</a></p>
</li>
<li>
<p><a href="devel_check_plugins_snmp.html">SNMP-basierte Check-Plugins schreiben</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_konzepte">
<a class="anchor" href="#_konzepte"></a>12. Konzepte</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="monitoring_basics.html">Grundlagen des Monitorings mit Checkmk</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_der_checkmk_micro_core_cmc">
<a class="anchor" href="#_der_checkmk_micro_core_cmc"></a>12.1. Der Checkmk Micro Core (CMC)</h3>
<div class="ulist">
<ul>
<li>
<p><a href="cmc.html">Der Checkmk Micro Core (CMC)</a></p>
</li>
<li>
<p><a href="cmc_differences.html">Besonderheiten des CMC</a></p>
</li>
<li>
<p><a href="cmc_migration.html">Migration auf den CMC</a></p>
</li>
<li>
<p><a href="cmc_files.html">Dateien und Verzeichnisse des CMC</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_die_checkmk_appliance">
<a class="anchor" href="#_die_checkmk_appliance"></a>13. Die Checkmk Appliance</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="appliance_rack1_quick_start.html">Schnellstart-Anleitung für Checkmk-Racks</a></p>
</li>
<li>
<p><a href="appliance_virt1_quick_start.html">Schnellstart-Anleitung für Checkmk virt1</a></p>
</li>
<li>
<p><a href="appliance_install_virt1.html">Virtuelle Appliance installieren</a></p>
</li>
<li>
<p><a href="appliance_usage.html">Appliance einrichten und nutzen</a></p>
</li>
<li>
<p><a href="appliance_backup.html">Backup in der Appliance</a></p>
</li>
<li>
<p><a href="appliance_cluster.html">Appliance im Cluster-Betrieb</a></p>
</li>
<li>
<p><a href="appliance_rack_config.html">Besonderheiten der Hardware-Appliance</a></p>
</li>
</ul>
</div>
</div>
</div>
</div></div>
<div class="main-nav__utils">
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="aboutMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">About Checkmk</button><div class="dropdown-menu dropup" aria-labelledby="aboutMenuButton">
<a class="dropdown-item" href="https://checkmk.com/product/features" target="_blank">Features</a><a class="dropdown-item" href="https://checkmk.com/product/editions" target="_blank">Editions</a><a class="dropdown-item" href="https://checkmk.com/integrations" target="_blank">Integrations</a><a class="dropdown-item" href="https://checkmk.com/imprint" target="_blank">Imprint</a><a class="dropdown-item" href="copyright.html" target="_blank">Copyright</a>
</div>
</div>
<div class="dropup dropdown__utils">
<button class="btn dropdown-toggle" type="button" id="learnMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Learn</button><div class="dropdown-menu dropup" aria-labelledby="learnMenuButton">
<a class="dropdown-item" href="https://checkmk.com/videos">Videos</a><a class="dropdown-item" href="https://checkmk.com/webinars">Webinars</a><a class="dropdown-item" href="https://checkmk.com/trainings/classes">Trainings</a>
</div>
</div>
<a class="main-nav__utils__link" href="https://forum.checkmk.com">Forum</a>
</div>
</div></aside><main><div id="header">
<h1>Spezialagenten entwickeln</h1>
<div class="details">
<span id="revdate">Last modified on 24-Feb-2025</span><a class="edit-document" href="https://github.com/Checkmk/checkmk-docs/edit/2.3.0/src/onprem/de/devel_special_agents.asciidoc">Edit this page on GitHub</a>
</div>
</div>
<div id="content">
<div id="preamble">
<div id="staticinfo">Dies ist eine am 2025-05-04 21:12:21 +0000 für die Offline-Nutzung exportierte Seite. Sie spiegelt möglicherweise nicht den aktuellen Stand der Checkmk Dokumentation wider. Um eine täglich aktualisierte Version dieser Seite anzusehen, rufen Sie bitte <a href="https://docs.checkmk.com/" target="_blank">docs.checkmk.com</a> auf.</div>
<div class="sectionbody"><div class="paragraph">
<p></p>
<div class="dropdown dropdown__related">
<button class="btn btn-primary dropdown-toggle" type="button" id="relatedMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Related Articles</button><div class="dropdown-menu dropdown-menu-right" aria-labelledby="relatedMenuButton">
<a href="devel_intro.html">Erweiterungen für Checkmk entwickeln</a>
<a href="datasource_programs.html">Datenquellenprogramme</a>
<a href="wato_monitoringagents.html">Monitoring-Agenten</a>
<a href="wato_services.html">Services verstehen und konfigurieren</a>
<a href="cmk_commandline.html">Checkmk auf der Kommandozeile</a>
<a href="mkps.html">Checkmk-Erweiterungspakete (MKPs)</a>
</div>
</div>
</div></div>
</div>
<div class="sect1">
<h2 id="heading_intro">
<span class="hidden-anchor sr-only" id="intro"></span>1. Einleitung</h2>
<div class="sectionbody">
<div class="paragraph"><p>Wir setzen an dieser Stelle voraus, dass Sie sich schon mit den Grundlagen von <a href="datasource_programs.html">Datenquellenprogrammen</a> und <a href="datasource_programs.html#specialagents">Spezialagenten</a> auseinandergesetzt haben und die prinzipiellen Mechanismen verstehen.
Spezialagenten erweitern ein Datenquellenprogramm um die einfache Konfigurierbarkeit.
Dafür werden Regeln im Setup genutzt.
Die Konfigurierbarkeit kann hierbei sowohl Umfang und Art der eingeholten Daten betreffen als auch deren Vorverarbeitung, bevor diese als Agentenausgabe in die weitere Verarbeitungskette übergeben werden.</p></div>
<div class="paragraph"><p>Jeder Spezialagent ist ein selbstständig lauffähiges Programm ohne Abhängigkeiten zu Programmierschnittstellen von Checkmk.
Wie bei Datenquellenprogrammen erfolgt auch bei Spezialagenten der Aufruf im üblichen Check-Intervall (standardmäßig ist dies meist eine Minute).
Ein Prozess wird durch den Spezialagenten gestartet und eine Agentenausgabe auf der Standardausgabe übergeben.
Danach beendet sich der Spezialagent.
Dies erlaubt es Ihnen, Spezialagenten in beliebigen Programmiersprachen zu implementieren.
Allerdings bedeuten kurz laufende Prozesse, dass <em>Just-in-time</em>-kompilierte Sprachen wie Java eher weniger geeignet sind als kompilierte Sprachen oder schnell startende interpretierte Sprachen.</p></div>
<div class="paragraph"><p>Die Konfiguration der gestarteten Prozesse erfolgt über Kommandozeilenparameter beim Aufruf des Spezialagenten.
Hierfür bestimmen Sie, in welcher Weise GUI-Elemente wie Texteingabefelder oder Checkboxen auf bestimmte Parameter abgebildet werden.</p></div>
<div class="paragraph"><p>Die Code-Beispiele dieses Artikels finden Sie in unserem <a href="https://github.com/Checkmk/checkmk-docs/tree/2.3.0/examples/devel_special_agents" target="_blank">GitHub-Repository</a> und den fertig gebauten Open-Meteo-Spezialagenten zudem als <a href="https://exchange.checkmk.com/p/ometemp" target="_blank">MKP in der Checkmk-Exchange</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="heading_minimal_agent">
<span class="hidden-anchor sr-only" id="minimal_agent"></span>2. Einen „minimalen“ Spezialagenten erstellen</h2>
<div class="sectionbody">
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Auch im Zusammenhang mit der Entwicklung von Spezialagenten müssen Sie darauf achten, jeweils den Instanzbenutzer für die Dateierstellung zu verwenden.
Sind Eigentümer oder Berechtigungen nicht korrekt gesetzt, kann es zu Problemen und Inkompatibilitäten kommen.</p></div></td>
</tr></table></div>
<div class="paragraph"><p>Im Gegensatz zum Datenquellenprogramm kann ein Spezialagent nicht an einer beliebigen Stelle im Dateisystem liegen.
Er hat seinen Platz in der Verzeichnishierarchie von Checkmk.
Zudem muss der Dateiname mit <code>agent_</code> beginnen.
Des weiteren müssen Spezialagenten immer der Checkmk-Instanz bekannt gemacht werden.
Ein minimaler, lauffähiger Spezialagent benötigt also wenigstens drei Dateien: den Spezialagenten, die Regelkonfiguration und die Aufrufkonfiguration.</p></div>
<div class="sect2">
<h3 id="heading_prepare_env">
<span class="hidden-anchor sr-only" id="prepare_env"></span>2.1. Vorbereitung der Umgebung</h3>
<div class="paragraph"><p>Vorbereitend sollten Sie daher drei Dateiverzeichnisse anlegen, die sich alle unterhalb von <code>~/local/lib/python3/cmk_addons/plugins/&lt;plug-in_family&gt;</code> befinden.
Das im Beispiel gezeigte vierte ist optional, er wird gegebenenfalls für einen agentenbasierten Check verwendet.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>mkdir<span class="tok-w"> </span>-p<span class="tok-w"> </span>local/lib/python3/cmk_addons/plugins/hellospecial/libexec
<span class="tok-gp">OMD[mysite]:~$ </span>mkdir<span class="tok-w"> </span>-p<span class="tok-w"> </span>local/lib/python3/cmk_addons/plugins/hellospecial/rulesets
<span class="tok-gp">OMD[mysite]:~$ </span>mkdir<span class="tok-w"> </span>-p<span class="tok-w"> </span>local/lib/python3/cmk_addons/plugins/hellospecial/server_side_calls
<span class="tok-gp">OMD[mysite]:~$ </span>mkdir<span class="tok-w"> </span>-p<span class="tok-w"> </span>local/lib/python3/cmk_addons/plugins/hellospecial/agent_based</code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_special_agent">
<span class="hidden-anchor sr-only" id="special_agent"></span>2.2. Der Spezialagent</h3>
<div class="paragraph"><p>Was wäre für einen minimalen Spezialagenten besser geeignet als ein lokaler Check, der einen „Hallo Welt!“ Dienst bereitstellt?
Das gelingt bereits einem simplen Shell-Skript, welches zwei Zeilen Ausgabe erzeugt:</p></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/hellospecial/libexec/agent_hellospecial</div>
<div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">#</span>!/bin/bash
<span class="tok-go">echo '&lt;&lt;&lt;local&gt;&gt;&gt;'</span>
<span class="tok-go">echo '0 "Hello special" - This static service is always OK'</span></code></pre></div>
</div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Dieses Skript darf keine Dateiendung haben.</p></div></td>
</tr></table></div>
<div class="paragraph"><p>Nicht vergessen: Die Datei muss ausführbar gemacht werden:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>chmod<span class="tok-w"> </span><span class="tok-m">755</span><span class="tok-w"> </span>local/lib/python3/cmk_addons/plugins/hellospecial/libexec/agent_hellospecial</code></pre></div></div>
<div class="paragraph"><p>Damit vergeben Sie die notwendigen Berechtigungen:</p></div>
<div class="ulist"><ul>
<li><p>für den Eigentümer der Datei (Lesen, Schreiben, Ausführen)</p></li>
<li><p>für die mit einer Datei verknüpfte Gruppe (Lesen, Ausführen)</p></li>
<li><p>für andere Benutzer (Lesen, Ausführen).</p></li>
</ul></div>
</div>
<div class="sect2">
<h3 id="heading_rule_config">
<span class="hidden-anchor sr-only" id="rule_config"></span>2.3. Die Regelkonfiguration</h3>
<div class="paragraph"><p>Erstellt wird jetzt das absolute Minimum:</p></div>
<div class="ulist"><ul>
<li><p>Titel und Kategorie werden gesetzt.</p></li>
<li><p>Das GUI-Formular zur Konfiguration bleibt leer.</p></li>
</ul></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/hellospecial/rulesets/special_agent.py</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>
<span class="tok-c1"># Shebang needed only for editors</span>

<span class="tok-kn">from</span> <span class="tok-nn">cmk.rulesets.v1.form_specs</span> <span class="tok-kn">import</span> <span class="tok-n">Dictionary</span>
<span class="tok-kn">from</span> <span class="tok-nn">cmk.rulesets.v1.rule_specs</span> <span class="tok-kn">import</span> <span class="tok-n">SpecialAgent</span><span class="tok-p">,</span> <span class="tok-n">Topic</span><span class="tok-p">,</span> <span class="tok-n">Help</span><span class="tok-p">,</span> <span class="tok-n">Title</span>

<span class="tok-k">def</span> <span class="tok-nf">_formspec</span><span class="tok-p">():</span>
    <span class="tok-k">return</span> <span class="tok-n">Dictionary</span><span class="tok-p">(</span>
        <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Hello special!"</span><span class="tok-p">),</span>
        <span class="tok-n">help_text</span><span class="tok-o">=</span><span class="tok-n">Help</span><span class="tok-p">(</span><span class="tok-s2">"This rule is to demonstrate the minimum special agent."</span><span class="tok-p">),</span>
        <span class="tok-n">elements</span><span class="tok-o">=</span><span class="tok-p">{}</span>
    <span class="tok-p">)</span>

<span class="tok-n">rule_spec_hellospecial</span> <span class="tok-o">=</span> <span class="tok-n">SpecialAgent</span><span class="tok-p">(</span>
    <span class="tok-n">topic</span><span class="tok-o">=</span><span class="tok-n">Topic</span><span class="tok-o">.</span><span class="tok-n">GENERAL</span><span class="tok-p">,</span>
    <span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s2">"hellospecial"</span><span class="tok-p">,</span>
    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Hello special!"</span><span class="tok-p">),</span>
    <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">_formspec</span>
<span class="tok-p">)</span></code></pre></div>
</div>
<div class="paragraph"><p>Der <code>name</code> verweist auf den Namen des Spezialagenten, der das Präfix <code>agent_</code> bekommt.
Der so konfigurierte Agent wird in <span class="guihint">Other integrations</span> verfügbar sein.
Sein Konfigurationsformular enthält dank der leeren <code>elements={}</code> aber keine Einträge.</p></div>
</div>
<div class="sect2">
<h3 id="heading_call_config">
<span class="hidden-anchor sr-only" id="call_config"></span>2.4. Die Aufrufkonfiguration</h3>
<div class="paragraph"><p>Diese Konfiguration führt den auszuführenden Spezialagenten mit den Einstellungen zusammen, die aus GUI und Standardeinstellungen bezogen werden.
Aus diesen Einstellungen werden nun Aufrufparameter.
Der <code>name</code> verweist auch hier wieder auf den Namen des Spezialagenten, der das Präfix <code>agent_</code> bekommt.</p></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/hellospecial/server_side_calls/special_agent.py</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>
<span class="tok-c1"># Shebang needed only for editors</span>

<span class="tok-kn">from</span> <span class="tok-nn">cmk.server_side_calls.v1</span> <span class="tok-kn">import</span> <span class="tok-n">noop_parser</span><span class="tok-p">,</span> <span class="tok-n">SpecialAgentConfig</span><span class="tok-p">,</span> <span class="tok-n">SpecialAgentCommand</span>

<span class="tok-k">def</span> <span class="tok-nf">_agent_arguments</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">,</span> <span class="tok-n">host_config</span><span class="tok-p">):</span>
    <span class="tok-k">yield</span> <span class="tok-n">SpecialAgentCommand</span><span class="tok-p">(</span><span class="tok-n">command_arguments</span><span class="tok-o">=</span><span class="tok-p">[])</span>

<span class="tok-n">special_agent_hellospecial</span> <span class="tok-o">=</span> <span class="tok-n">SpecialAgentConfig</span><span class="tok-p">(</span>
    <span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s2">"hellospecial"</span><span class="tok-p">,</span>
    <span class="tok-n">parameter_parser</span><span class="tok-o">=</span><span class="tok-n">noop_parser</span><span class="tok-p">,</span>
    <span class="tok-n">commands_function</span><span class="tok-o">=</span><span class="tok-n">_agent_arguments</span>
<span class="tok-p">)</span></code></pre></div>
</div>
<div class="paragraph"><p>Damit sind die grundlegenden Voraussetzungen für den Spezialagenten vorhanden.
Sie können diese selbstverständlich jederzeit mit weiteren Angaben erweitern.</p></div>
</div>
<div class="sect2">
<h3 id="heading_first_test">
<span class="hidden-anchor sr-only" id="first_test"></span>2.5. Der erste Test</h3>
<div class="paragraph"><p>Sind die Dateien angelegt, starten Sie den Webserver der Instanz neu:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>restart<span class="tok-w"> </span>apache</code></pre></div></div>
<div class="paragraph"><p>Wenn Sie jetzt <span class="guihint">Setup &gt; Agents &gt; Other integrations</span> öffnen, sollten Sie in der Rubrik <span class="guihint">Custom integrations</span> den neuen Eintrag <span class="guihint">Hello special!</span> sehen.</p></div>
<div class="paragraph"><p>Fehlt dieser, prüfen Sie zuerst, ob Sie alle Dateien am dafür vorgesehenen Ort abgelegt haben.
Falls Sie nach weiteren möglichen Fehlerquellen suchen, können Sie dies in den kommerziellen Editionen bequem über die Verwaltung von <a href="glossar.html#mkp">Checkmk-Erweiterungspaketen</a> machen.
Alternativ haben wir Ihnen im Kapitel <a href="#detect_errors">Fehler beheben</a> die wichtigsten Fehlerquellen und mögliche Lösungsansätze aufgelistet.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_complex_example">
<span class="hidden-anchor sr-only" id="complex_example"></span>3. Ein komplexeres Beispiel: Ein vollständiger Wetter-Service</h2>
<div class="sectionbody">
<div class="paragraph"><p>Ein Check, der nie seinen Zustand ändert, ist – nun ja – ziemlich vorhersagbar.
Wir wagen also den Schritt hin zu einem „echten“ Spezialagenten, der eine Web- oder REST-API abfragt und als Antwort ein Objekt als JSON- oder XML-Struktur erhält.
Das sind typische Datenformate auch beim Zugriff auf die APIs von Netzwerkgeräten wie SAN-Devices.</p></div>
<div class="paragraph"><p>Damit Sie für diese Übung keine spezifische Hardware benötigen, greifen wir auf die freie API von <a href="https://open-meteo.com/" target="_blank">Open-Meteo.com</a> zu.
Unser Ziel ist es, einen kompletten Spezialagenten zu schreiben, der mit Längen- und Breitengrad konfiguriert wird.
Um das Beispiel einfach zu halten, übernimmt der Spezialagent auch direkt die Interpretation der Daten.
So soll der Spezialagent bei Temperaturen unter 5 Grad Celsius den Zustand <span class="state1">WARN</span> und bei unter 0 Grad den Zustand <span class="state2">CRIT</span> annehmen.
Unseren Check nennen wir abgekürzt <code>ometemp</code>, den Spezialagenten entsprechend <code>agent_ometemp</code> und so weiter.</p></div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Open-Meteo erlaubt die kostenlose Nutzung für nicht-kommerzielle Zwecke und behält sich vor, bei zu vielen Anfragen IP-Adressen zu blocken.
Die minütliche Abfrage der API ist dabei noch im tolerierten Rahmen.
Dennoch sollten Sie den Dienst nicht überstrapazieren und Spezialagentenregeln, die diesen Dienst nutzen, nach erfolgreichen Tests wieder löschen.
Achten Sie besonders darauf, dass zum Test angelegte Regeln für die Zuordnung des Spezialagenten nur für einen Host greifen und nicht für Dutzende oder Hunderte!</p></div></td>
</tr></table></div>
<div class="sect2">
<h3 id="heading_env_prep">
<span class="hidden-anchor sr-only" id="env_prep"></span>3.1. Vorbereitung der Umgebung</h3>
<div class="paragraph"><p>Wie im vorherigen Beispiel legen Sie als erstes die <a href="#prepare_env">benötigten Dateiverzeichnisse</a> an - diesmal mit der Benennung <code>ometemp</code> anstelle von <code>hellospecial</code>.</p></div>
</div>
<div class="sect2">
<h3 id="heading_special_agent2">
<span class="hidden-anchor sr-only" id="special_agent2"></span>3.2. Der Spezialagent</h3>
<div class="paragraph"><p>Jetzt, wo echte Daten verarbeitet werden sollen, müssen Sie sich zudem einige Gedanken machen, beispielsweise zur Programmiersprache und der Vorverarbeitung.
Unser Beispiel fragt eine öffentliche API ab und erhält JSON-Daten.
Das könnte man in der Shell mit einem <code>curl</code>-Kommando erledigen.
Da aber Checkmk ein gut ausgestattetes Python mitbringt, liegt es nahe, dieses zu verwenden.</p></div>
<div class="paragraph"><p>Die nächste Entscheidung betrifft die Aufarbeitung der Daten.
Sie können beispielsweise JSON-Daten einfach in die Agentenausgabe durchreichen oder aber im Spezialagenten bereits in ein Tabellenformat konvertieren.
In der Praxis entscheiden Sie dies meist abhängig von Ihrer Arbeitsumgebung:
Wie arbeitsteilig ist Ihre Check-Entwicklung gestaltet?
Vereinfachen aufbereitete Daten die Entwicklung des zugehörigen <a href="devel_check_plugins.html">agentenbasierten Check-Plugins</a>?
Oder machen sie diese sogar überflüssig?
Letzteres ist dann der Fall, wenn Daten so aufbereitet werden können, dass sie mit einem vorhandenen Check-Plugin geparst werden können.</p></div>
<div class="paragraph"><p>Unser Beispiel reicht die JSON-Antwort einfach durch.
Das Parsen findet dann im agentenbasierten Check-Plugin statt.
Die Übergabe von Längen- und Breitengrad erfolgt durch die Kommandozeilenargumente <code>--latitude</code> und <code>--longitude</code>.
Um Kommandozeilenargumente besser einlesen zu können, verwenden wir die Bibliothek <code>argparse</code>.
Da Open-Meteo den Längen- und Breitengrad in die URL kodiert unterstützt, genügt eine URL mit Platzhaltern.
Probieren Sie diese URL mit <em>Ihrem aktuellen</em> Längen- und Breitengrad ruhig einmal im Browser aus.</p></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/ometemp/libexec/agent_ometemp</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>
<span class="tok-c1"># Shebang needed this time to find the interpreter!</span>

<span class="tok-kn">import</span> <span class="tok-nn">requests</span>
<span class="tok-kn">import</span> <span class="tok-nn">argparse</span>

<span class="tok-n">url</span> <span class="tok-o">=</span> <span class="tok-s2">"https://api.open-meteo.com/v1/forecast?latitude=</span><span class="tok-si">{lat:.4f}</span><span class="tok-s2">&amp;longitude=</span><span class="tok-si">{long:.4f}</span><span class="tok-s2">&amp;current=temperature_2m"</span>

<span class="tok-n">parser</span> <span class="tok-o">=</span> <span class="tok-n">argparse</span><span class="tok-o">.</span><span class="tok-n">ArgumentParser</span><span class="tok-p">(</span><span class="tok-s2">"agent_ometemp"</span><span class="tok-p">)</span>
<span class="tok-n">parser</span><span class="tok-o">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
    <span class="tok-s2">"--latitude"</span><span class="tok-p">,</span>
    <span class="tok-n">help</span><span class="tok-o">=</span><span class="tok-s2">"Specify the latitude in degrees (decimal notation)."</span><span class="tok-p">,</span>
    <span class="tok-nb">type</span><span class="tok-o">=</span><span class="tok-nb">float</span><span class="tok-p">,</span>
    <span class="tok-n">default</span><span class="tok-o">=</span><span class="tok-mf">0.0</span><span class="tok-p">)</span>
<span class="tok-n">parser</span><span class="tok-o">.</span><span class="tok-n">add_argument</span><span class="tok-p">(</span>
    <span class="tok-s2">"--longitude"</span><span class="tok-p">,</span>
    <span class="tok-n">help</span><span class="tok-o">=</span><span class="tok-s2">"Specify the longitude in degrees (decimal notation)."</span><span class="tok-p">,</span>
    <span class="tok-nb">type</span><span class="tok-o">=</span><span class="tok-nb">float</span><span class="tok-p">,</span>
    <span class="tok-n">default</span><span class="tok-o">=</span><span class="tok-mf">0.0</span><span class="tok-p">)</span>
<span class="tok-n">args</span> <span class="tok-o">=</span> <span class="tok-n">parser</span><span class="tok-o">.</span><span class="tok-n">parse_args</span><span class="tok-p">()</span>

<span class="tok-c1"># print(url.format(lat=args.latitude, long=args.longitude))</span>
<span class="tok-n">response</span> <span class="tok-o">=</span> <span class="tok-n">requests</span><span class="tok-o">.</span><span class="tok-n">get</span><span class="tok-p">(</span><span class="tok-n">url</span><span class="tok-o">.</span><span class="tok-n">format</span><span class="tok-p">(</span><span class="tok-n">lat</span><span class="tok-o">=</span><span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-n">latitude</span><span class="tok-p">,</span> <span class="tok-n">long</span><span class="tok-o">=</span><span class="tok-n">args</span><span class="tok-o">.</span><span class="tok-n">longitude</span><span class="tok-p">))</span>
<span class="tok-nb">print</span><span class="tok-p">(</span><span class="tok-s1">'&lt;&lt;&lt;ometemp:sep(0)&gt;&gt;&gt;'</span><span class="tok-p">)</span>
<span class="tok-nb">print</span><span class="tok-p">(</span><span class="tok-n">response</span><span class="tok-o">.</span><span class="tok-n">json</span><span class="tok-p">())</span></code></pre></div>
</div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Zur Erinnerung: Dieses Skript darf keine Dateiendung haben.</p></div></td>
</tr></table></div>
<div class="paragraph"><p>Die Agentensektion <code>ometemp</code> enthält schlussendlich nur das empfangene JSON-Objekt.
Testen Sie den Spezialagenten, indem Sie ihn auf der Kommandozeile aufrufen.</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>~/local/lib/python3/cmk_addons/plugins/ometemp/libexec/agent_ometemp<span class="tok-w"> </span>--latitude<span class="tok-w"> </span><span class="tok-m">48</span>.1305<span class="tok-w"> </span>--longitude<span class="tok-w"> </span><span class="tok-m">11</span>.5953</code></pre></div></div>
<div class="paragraph"><p>Ihre Ausgabe auf der Kommandozeile sollte nun in etwa so aussehen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">&lt;&lt;&lt;ometemp:sep(0)&gt;&gt;&gt;</span>
<span class="tok-go">{'latitude': 48.14, 'longitude': 11.6, 'generationtime_ms': 0.01728534698486328, 'utc_offset_seconds': 0, 'timezone': 'GMT', 'timezone_abbreviation': 'GMT', 'elevation': 536.0, 'current_units': {'time': 'iso8601', 'interval': 'seconds', 'temperature_2m': '°C'}, 'current': {'time': '2025-01-09T12:45', 'interval': 900, 'temperature_2m': 9.8}}</span></code></pre></div></div>
</div>
<div class="sect2">
<h3 id="heading_rule_config2">
<span class="hidden-anchor sr-only" id="rule_config2"></span>3.3. Die Regelkonfiguration</h3>
<div class="paragraph"><p>Als nächstes folgt nun die Regelkonfiguration für den Agenten.
Diese Regel wird, wenn sie fertig ist, in <span class="guihint">Setup &gt; Agents &gt; Other integrations</span> in der Gruppierung <span class="guihint">Environmental</span> angezeigt.</p></div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>Die Überschriften für die Gruppierung in <span class="guihint">Setup &gt; Agents &gt; Other integrations</span> werden dynamisch sichtbar gemacht.
D.h. Sie sehen die Gruppierung <span class="guihint">Environmental</span> erst ab dem Zeitpunkt, wenn der erste darin einsortierte Spezialagent vorhanden ist.
Eine – nicht abschließende – Übersicht nutzbarer Gruppierungen finden Sie unter <a href="#avail_integration">Dateien und Verzeichnisse</a> am Ende dieses Artikels.</p></div></td>
</tr></table></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/ometemp/rulesets/special_agent.py</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>
<span class="tok-c1"># Shebang needed only for editors</span>

<span class="tok-kn">from</span> <span class="tok-nn">cmk.rulesets.v1.form_specs</span> <span class="tok-kn">import</span> <span class="tok-n">Dictionary</span><span class="tok-p">,</span> <span class="tok-n">DictElement</span><span class="tok-p">,</span> <span class="tok-n">Float</span>
<span class="tok-kn">from</span> <span class="tok-nn">cmk.rulesets.v1.rule_specs</span> <span class="tok-kn">import</span> <span class="tok-n">SpecialAgent</span><span class="tok-p">,</span> <span class="tok-n">Topic</span><span class="tok-p">,</span> <span class="tok-n">Help</span><span class="tok-p">,</span> <span class="tok-n">Title</span>

<span class="tok-k">def</span> <span class="tok-nf">_formspec</span><span class="tok-p">():</span>
    <span class="tok-k">return</span> <span class="tok-n">Dictionary</span><span class="tok-p">(</span>
        <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Open-Meteo temperature"</span><span class="tok-p">),</span>
        <span class="tok-n">help_text</span><span class="tok-o">=</span><span class="tok-n">Help</span><span class="tok-p">(</span><span class="tok-s2">"This rule is used to showcase a special agent with configuration."</span><span class="tok-p">),</span>
        <span class="tok-n">elements</span><span class="tok-o">=</span><span class="tok-p">{</span>
            <span class="tok-s2">"latitude"</span><span class="tok-p">:</span> <span class="tok-n">DictElement</span><span class="tok-p">(</span>
                <span class="tok-n">required</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span>
                <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">Float</span><span class="tok-p">(</span>
                    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Latitude in degrees (decimal notation)"</span><span class="tok-p">),</span>
                <span class="tok-p">),</span>
            <span class="tok-p">),</span>
            <span class="tok-s2">"longitude"</span><span class="tok-p">:</span> <span class="tok-n">DictElement</span><span class="tok-p">(</span>
                <span class="tok-n">required</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span>
                <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">Float</span><span class="tok-p">(</span>
                    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Longitude in degrees (decimal notation)"</span><span class="tok-p">),</span>
                <span class="tok-p">),</span>
            <span class="tok-p">),</span>
        <span class="tok-p">}</span>
    <span class="tok-p">)</span>

<span class="tok-n">rule_spec_ometemp</span> <span class="tok-o">=</span> <span class="tok-n">SpecialAgent</span><span class="tok-p">(</span>
    <span class="tok-n">topic</span><span class="tok-o">=</span><span class="tok-n">Topic</span><span class="tok-o">.</span><span class="tok-n">ENVIRONMENTAL</span><span class="tok-p">,</span>
    <span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s2">"ometemp"</span><span class="tok-p">,</span>
    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Open-Meteo temperature"</span><span class="tok-p">),</span>
    <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">_formspec</span>
<span class="tok-p">)</span></code></pre></div>
</div>
<div class="paragraph"><p>Damit haben Sie auch diesen Spezialagenten geschaffen.
Nun starten Sie den Webserver der Instanz neu:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>omd<span class="tok-w"> </span>restart<span class="tok-w"> </span>apache</code></pre></div></div>
<div class="paragraph"><p>Auf Basis dieses Spezialagenten könnten Sie jetzt bereits eine Regel anlegen <span class="guihint">Add rule: Open-Meteo temperature</span>.
Viel macht diese Regel allerdings noch nicht.
Sie enthält aktuell nur die beiden Felder für die Eingabe von Längen- und Breitengrad.</p></div>
<div class="sect3">
<h4 id="heading_use_pwd">
<span class="hidden-anchor sr-only" id="use_pwd"></span>Erweiterung: Passwörter verwenden</h4>
<div class="paragraph"><p>In vielen Fällen sind Benutzername und Passwort oder ein API-Schlüssel zum Zugriff auf Daten notwendig.
Für die Verwaltung von Passwörtern stehen eigene <code>formspec</code>-Elemente zur Verfügung.
Diese erlauben es, entweder Passwörter ad hoc zu definieren, oder auf den <a href="password_store.html">Passwortspeicher</a> zuzugreifen.
Dazu können Sie in diesem Beispiel folgende Erweiterung des oben erstellten Skripts nutzen.
Erweitern Sie die erste Zeile um die zusätzlichen Variablen und fügen Sie die neuen Programmabschnitte ein:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-kn">from</span> <span class="tok-nn">cmk.rulesets.v1.form_specs</span> <span class="tok-kn">import</span> <span class="tok-n">Dictionary</span><span class="tok-p">,</span> <span class="tok-n">DictElement</span><span class="tok-p">,</span> <span class="tok-n">Float</span><span class="tok-p">,</span> <span class="tok-n">String</span><span class="tok-p">,</span> <span class="tok-n">Password</span><span class="tok-p">,</span> <span class="tok-n">migrate_to_password</span>

<span class="tok-k">def</span> <span class="tok-nf">_formspec</span><span class="tok-p">():</span>
    <span class="tok-k">return</span> <span class="tok-n">Dictionary</span><span class="tok-p">(</span>
        <span class="tok-c1"># ...</span>
        <span class="tok-n">elements</span><span class="tok-o">=</span><span class="tok-p">{</span>
            <span class="tok-c1"># ...</span>
            <span class="tok-s2">"user"</span><span class="tok-p">:</span> <span class="tok-n">DictElement</span><span class="tok-p">(</span>
                <span class="tok-n">required</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span>
                <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">String</span><span class="tok-p">(</span>
                    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"User ID for login"</span><span class="tok-p">),</span>
                    <span class="tok-n">prefill</span><span class="tok-o">=</span><span class="tok-n">DefaultValue</span><span class="tok-p">(</span><span class="tok-s2">"monitoring"</span><span class="tok-p">),</span>
                <span class="tok-p">),</span>
            <span class="tok-p">),</span>
            <span class="tok-s2">"password"</span><span class="tok-p">:</span> <span class="tok-n">DictElement</span><span class="tok-p">(</span>
                <span class="tok-n">required</span><span class="tok-o">=</span><span class="tok-kc">True</span><span class="tok-p">,</span>
                <span class="tok-n">parameter_form</span><span class="tok-o">=</span><span class="tok-n">Password</span><span class="tok-p">(</span>
                    <span class="tok-n">title</span><span class="tok-o">=</span><span class="tok-n">Title</span><span class="tok-p">(</span><span class="tok-s2">"Password for this user"</span><span class="tok-p">),</span>
                    <span class="tok-n">migrate</span><span class="tok-o">=</span><span class="tok-n">migrate_to_password</span><span class="tok-p">,</span>
                <span class="tok-p">),</span>
            <span class="tok-p">),</span>
        <span class="tok-p">}</span>
    <span class="tok-p">)</span></code></pre></div></div>
<div class="paragraph"><p>Vergessen Sie nicht, nach der Erweiterung den Webserver der Instanz erneut zu starten.</p></div>
<div class="paragraph"><p>Da beim Beispiel mit Open-Meteo <em>kein</em> Passwort erforderlich ist, zeigen wir hier zwar den prinzipiellen Umgang mit Passwörtern, übernehmen diese aber nicht in den API-Aufruf.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_call_config2">
<span class="hidden-anchor sr-only" id="call_config2"></span>3.4. Die Aufrufkonfiguration</h3>
<div class="paragraph"><p>Als nächstes erweitern wir den neuen Spezialagenten so, dass er nicht nur den Längen- und Breitengrad enthält, sondern diesen auch weiterverarbeitet.
Unser Ziel ist ja letztlich eine Auswertung der aktuellen Temperaturwerte für unseren Standort.
Die folgende Konfiguration führt daher den auszuführenden Spezialagenten mit den aus der GUI – also aus unserem bislang bestehenden Regelteil – und aus den Standards bezogenen Einstellungen zusammen.</p></div>
<div class="paragraph"><p>Die Werte für Längen- und Breitengrad, die Sie in der Regel angeben können, werden nun in das  <code>params</code> benannte Dictionary übertragen.
Gleichzeitig enthält das Objekt <code>host_config</code> alle Host-spezifischen Einstellungen, die hier genutzt werden sollen.
So haben Sie zum Beispiel mit <code>host_config.primary_ip_config.address</code> den Zugriff auf die primäre IP-Adresse, <code>host_config.name</code> enthält den Host-Namen.</p></div>
<div class="paragraph"><p>Beachten Sie bei der Übergabe an den Spezialagenten, dass der Aufruf über eine Shell erfolgt.
Die Liste der Aufrufparameter darf daher nur Strings enthalten.
Aus den Einstellungen werden hierbei Aufrufparameter, die in der Liste <code>command_arguments</code> landen.</p></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/ometemp/server_side_calls/special_agent.py</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>
<span class="tok-c1"># Shebang needed only for editors</span>

<span class="tok-kn">from</span> <span class="tok-nn">cmk.server_side_calls.v1</span> <span class="tok-kn">import</span> <span class="tok-n">noop_parser</span><span class="tok-p">,</span> <span class="tok-n">SpecialAgentConfig</span><span class="tok-p">,</span> <span class="tok-n">SpecialAgentCommand</span>

<span class="tok-k">def</span> <span class="tok-nf">_agent_arguments</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">,</span> <span class="tok-n">host_config</span><span class="tok-p">):</span>
    <span class="tok-n">args</span> <span class="tok-o">=</span> <span class="tok-p">[</span> <span class="tok-s2">"--latitude"</span><span class="tok-p">,</span> <span class="tok-nb">str</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'latitude'</span><span class="tok-p">]),</span> <span class="tok-s2">"--longitude"</span><span class="tok-p">,</span> <span class="tok-nb">str</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'longitude'</span><span class="tok-p">])</span> <span class="tok-p">]</span>
    <span class="tok-k">yield</span> <span class="tok-n">SpecialAgentCommand</span><span class="tok-p">(</span><span class="tok-n">command_arguments</span><span class="tok-o">=</span><span class="tok-n">args</span><span class="tok-p">)</span>

<span class="tok-n">special_agent_ometemp</span> <span class="tok-o">=</span> <span class="tok-n">SpecialAgentConfig</span><span class="tok-p">(</span>
    <span class="tok-n">name</span><span class="tok-o">=</span><span class="tok-s2">"ometemp"</span><span class="tok-p">,</span>
    <span class="tok-n">parameter_parser</span><span class="tok-o">=</span><span class="tok-n">noop_parser</span><span class="tok-p">,</span>
    <span class="tok-n">commands_function</span><span class="tok-o">=</span><span class="tok-n">_agent_arguments</span>
<span class="tok-p">)</span></code></pre></div>
</div>
<div class="sect3">
<h4 id="heading__passwörter_verwenden">
<span class="hidden-anchor sr-only" id="_passwörter_verwenden"></span>Passwörter verwenden</h4>
<div class="admonitionblock important"><table><tr>
<td class="icon"><img src="../images/icons/important.png" alt="Important"></td>
<td class="content"><div class="paragraph"><p>Das hier gezeigte Beispiel übergibt Passwörter im Klartext als Kommandozeilenargumente.
Ohne weitere Maßnahmen sind diese Passwörter beispielsweise aus der Prozesstabelle auslesbar.
Sie können die Angriffsfläche minimieren, indem Sie den Eintrag in der Prozesstabelle gleich beim Programmstart ändern.
Unter Python geht dies zum Beispiel mit dem <a href="https://pypi.org/project/setproctitle/" target="_blank">Modul <code>setproctitle</code></a>.
Einen noch sichereren Weg, auf dem das gestartete Programm das Passwort direkt aus dem Passwortspeicher ausliest, bereiten wir gerade vor.</p></div></td>
</tr></table></div>
<div class="paragraph"><p>Da Passwörter als Objekt gespeichert werden, erfolgt der Zugriff über die Funktion <code>unsafe()</code> dieses Objektes:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-k">def</span> <span class="tok-nf">_agent_arguments</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">,</span> <span class="tok-n">host_config</span><span class="tok-p">):</span>
    <span class="tok-n">args</span> <span class="tok-o">=</span> <span class="tok-p">[</span>
        <span class="tok-s2">"--latitude"</span><span class="tok-p">,</span> <span class="tok-nb">str</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'latitude'</span><span class="tok-p">]),</span>
        <span class="tok-s2">"--longitude"</span><span class="tok-p">,</span> <span class="tok-nb">str</span><span class="tok-p">(</span><span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'longitude'</span><span class="tok-p">]),</span>
        <span class="tok-s2">"--user"</span><span class="tok-p">,</span> <span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'user'</span><span class="tok-p">],</span>
        <span class="tok-s2">"--password"</span><span class="tok-p">,</span> <span class="tok-n">params</span><span class="tok-p">[</span><span class="tok-s1">'password'</span><span class="tok-p">]</span><span class="tok-o">.</span><span class="tok-n">unsafe</span><span class="tok-p">()</span>
    <span class="tok-p">]</span>
    <span class="tok-k">yield</span> <span class="tok-n">SpecialAgentCommand</span><span class="tok-p">(</span><span class="tok-n">command_arguments</span><span class="tok-o">=</span><span class="tok-n">args</span><span class="tok-p">)</span></code></pre></div></div>
</div>
</div>
<div class="sect2">
<h3 id="heading_check_plugin">
<span class="hidden-anchor sr-only" id="check_plugin"></span>3.5. Das Check-Plugin</h3>
<div class="paragraph"><p>Der Vollständigkeit halber zeigen wir hier noch das agentenbasierte Check-Plugin.
Die Entwicklung dieser Plugins beschreibt der Artikel zu <a href="devel_check_plugins.html">agentenbasierte Check-Plugins</a> ausführlich.</p></div>
<div class="paragraph"><p>Ein Unterschied zum dort erwähnten Beispiel ist hier die Übergabe der JSON-Rückgabe der REST-API:
Das Check-Plugin erhält die Agentensektion immer als zweidimensionale Liste („Liste von Listen“) von Strings.
Wir verwenden zuerst die <code>itertools</code>, um aus dieser zweidimensionalen Liste eine eindimensionale zu machen.
Anschließend konkatenieren wir dieses resultierende Array mit Leerzeichen.
Dies konvertiert die gesamte Agentensektion in einen einzigen String.
Schließlich stellen wir sicher, dass einfache Anführungszeichen durch doppelte ersetzt werden, um mit <code>json.loads()</code> den String direkt als Objekt laden zu können.</p></div>
<div class="listingblock">
<div class="title">~/local/lib/python3/cmk_addons/plugins/ometemp/agent_based/ometemp.py</div>
<div class="content"><pre class="pygments highlight"><code data-lang="python"><span></span><span class="tok-ch">#!/usr/bin/env python3</span>

<span class="tok-kn">from</span> <span class="tok-nn">cmk.agent_based.v2</span> <span class="tok-kn">import</span> <span class="tok-n">AgentSection</span><span class="tok-p">,</span> <span class="tok-n">CheckPlugin</span><span class="tok-p">,</span> <span class="tok-n">Service</span><span class="tok-p">,</span> <span class="tok-n">Result</span><span class="tok-p">,</span> <span class="tok-n">State</span><span class="tok-p">,</span> <span class="tok-n">Metric</span><span class="tok-p">,</span> <span class="tok-n">check_levels</span>
<span class="tok-kn">import</span> <span class="tok-nn">itertools</span>
<span class="tok-kn">import</span> <span class="tok-nn">json</span>

<span class="tok-k">def</span> <span class="tok-nf">parse_ometemp</span><span class="tok-p">(</span><span class="tok-n">string_table</span><span class="tok-p">):</span>
    <span class="tok-n">flatlist</span> <span class="tok-o">=</span> <span class="tok-nb">list</span><span class="tok-p">(</span><span class="tok-n">itertools</span><span class="tok-o">.</span><span class="tok-n">chain</span><span class="tok-o">.</span><span class="tok-n">from_iterable</span><span class="tok-p">(</span><span class="tok-n">string_table</span><span class="tok-p">))</span>
    <span class="tok-n">parsed</span> <span class="tok-o">=</span> <span class="tok-n">json</span><span class="tok-o">.</span><span class="tok-n">loads</span><span class="tok-p">(</span><span class="tok-s2">" "</span><span class="tok-o">.</span><span class="tok-n">join</span><span class="tok-p">(</span><span class="tok-n">flatlist</span><span class="tok-p">)</span><span class="tok-o">.</span><span class="tok-n">replace</span><span class="tok-p">(</span><span class="tok-s2">"'"</span><span class="tok-p">,</span> <span class="tok-s2">"</span><span class="tok-se">\"</span><span class="tok-s2">"</span><span class="tok-p">))</span>
    <span class="tok-k">return</span> <span class="tok-n">parsed</span>

<span class="tok-k">def</span> <span class="tok-nf">discover_ometemp</span><span class="tok-p">(</span><span class="tok-n">section</span><span class="tok-p">):</span>
    <span class="tok-k">yield</span> <span class="tok-n">Service</span><span class="tok-p">()</span>

<span class="tok-k">def</span> <span class="tok-nf">check_ometemp</span><span class="tok-p">(</span><span class="tok-n">section</span><span class="tok-p">):</span>
    <span class="tok-n">t</span> <span class="tok-o">=</span> <span class="tok-n">section</span><span class="tok-p">[</span><span class="tok-s1">'current'</span><span class="tok-p">][</span><span class="tok-s1">'temperature_2m'</span><span class="tok-p">]</span>
    <span class="tok-k">if</span> <span class="tok-n">t</span> <span class="tok-o">&lt;</span> <span class="tok-mf">0.0</span><span class="tok-p">:</span>
        <span class="tok-k">yield</span> <span class="tok-n">Result</span><span class="tok-p">(</span><span class="tok-n">state</span><span class="tok-o">=</span><span class="tok-n">State</span><span class="tok-o">.</span><span class="tok-n">CRIT</span><span class="tok-p">,</span> <span class="tok-n">summary</span><span class="tok-o">=</span><span class="tok-s2">"Brrrrrr!"</span><span class="tok-p">)</span>
    <span class="tok-k">elif</span> <span class="tok-n">t</span> <span class="tok-o">&lt;</span> <span class="tok-mf">5.0</span><span class="tok-p">:</span>
        <span class="tok-k">yield</span> <span class="tok-n">Result</span><span class="tok-p">(</span><span class="tok-n">state</span><span class="tok-o">=</span><span class="tok-n">State</span><span class="tok-o">.</span><span class="tok-n">WARN</span><span class="tok-p">,</span> <span class="tok-n">summary</span><span class="tok-o">=</span><span class="tok-s2">"It's getting cold..."</span><span class="tok-p">)</span>
    <span class="tok-k">else</span><span class="tok-p">:</span>
        <span class="tok-k">yield</span> <span class="tok-n">Result</span><span class="tok-p">(</span><span class="tok-n">state</span><span class="tok-o">=</span><span class="tok-n">State</span><span class="tok-o">.</span><span class="tok-n">OK</span><span class="tok-p">,</span> <span class="tok-n">summary</span><span class="tok-o">=</span><span class="tok-s2">"Nice here."</span><span class="tok-p">)</span>
    <span class="tok-k">return</span>

<span class="tok-n">agent_section_ometemp</span> <span class="tok-o">=</span> <span class="tok-n">AgentSection</span><span class="tok-p">(</span>
    <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-s2">"ometemp"</span><span class="tok-p">,</span>
    <span class="tok-n">parse_function</span> <span class="tok-o">=</span> <span class="tok-n">parse_ometemp</span><span class="tok-p">,</span>
<span class="tok-p">)</span>

<span class="tok-n">check_plugin_ometemp</span> <span class="tok-o">=</span> <span class="tok-n">CheckPlugin</span><span class="tok-p">(</span>
    <span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-s2">"ometemp"</span><span class="tok-p">,</span>
    <span class="tok-n">service_name</span> <span class="tok-o">=</span> <span class="tok-s2">"Open Meteo temperature (2m)"</span><span class="tok-p">,</span>
    <span class="tok-n">discovery_function</span> <span class="tok-o">=</span> <span class="tok-n">discover_ometemp</span><span class="tok-p">,</span>
    <span class="tok-n">check_function</span> <span class="tok-o">=</span> <span class="tok-n">check_ometemp</span><span class="tok-p">,</span>
<span class="tok-p">)</span></code></pre></div>
</div>
<div class="paragraph"><p>Die in diesem Artikel beschriebenen Skripte für Spezialagent, Regelkonfiguration und Aufrufkonfiguration in
Kombination mit diesem Check-Plugin sollten Ihnen nun einen funktionierenden Service in Checkmk liefern:</p></div>
<div class="imageblock"><div class="content"><img src="../images/devel_special_services.png" alt="Ansicht der Services inklusive ometemp."></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_detect_errors">
<span class="hidden-anchor sr-only" id="detect_errors"></span>4. Fehler beheben</h2>
<div class="sectionbody">
<div class="paragraph"><p>Auch bei der Entwicklung eigener Spezialagenten kann es (leider) zu Fehlern und Problemen kommen.
Deren Ursachen zu lokalisieren ist dann ebenso wichtig wie die eigentliche Behebung.</p></div>
<div class="sect2">
<h3 id="heading_serv_warn">
<span class="hidden-anchor sr-only" id="serv_warn"></span>4.1. Warnhinweise in der Service-Übersicht des Hosts</h3>
<div class="paragraph"><p>Wenn der Service <span class="guihint">Check_MK</span> nach der Aktivierung des Spezialagenten plötzlich seinen Zustand auf <span class="state1">WARN</span> oder <span class="state2">CRIT</span> wechselt, sehen Sie sich die zugehörige <span class="guihint">Summary</span> an.</p></div>
<div class="imageblock"><div class="content"><img src="../images/devel_special_check_mk.png" alt="Fehlermeldung des Services Check_MK wegen des Spezialagenten."></div></div>
<div class="paragraph"><p>Lässt die <span class="guihint">Summary</span> auf einen Zusammenhang mit dem neuen Spezialagenten schließen, so prüfen Sie die Eigenschaften des Hosts.
Für den Parameter <span class="guihint">Checkmk agent / API integrations</span> muss der Wert <span class="guihint">Configured API integrations and Checkmk agent</span> gewählt sein.</p></div>
<div class="imageblock"><div class="content"><img src="../images/devel_special_monitoring_agent.png" alt="Auswahl von " width="Configured API integrations and Checkmk agent" .></div></div>
</div>
<div class="sect2">
<h3 id="heading_incompatibles">
<span class="hidden-anchor sr-only" id="incompatibles"></span>4.2. Die Regel ist verschwunden oder ein Warnhinweis ist sichtbar</h3>
<div class="paragraph"><p>Wenn Ihr Spezialagent nicht (mehr) in Checkmk unter <span class="guihint">Setup &gt; Agents &gt; Other integrations</span> angezeigt wird, liegt möglicherweise ein Fehler in der
Regelkonfiguration (<code>rulesets/special_agent.py</code>) vor.</p></div>
<div class="paragraph"><p><span class="image-inline"><img src="../images/CEE.svg" alt="CEE" class="icon-left"></span> Bei Nutzung einer der kommerziellen Editionen sehen Sie möglicherweise stattdessen einen roten Warnhinweis beim Versuch die Regel zu bearbeiten
oder eine neue zu erstellen.
Folgen Sie dem darin befindlichen Link zur Seite für den Absturzbericht.
Dort wird Ihnen die mögliche Problemursache anzeigt.</p></div>
<div class="paragraph"><p>Lassen Sie sich dann die Fehlerbeschreibungen anzeigen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>tail<span class="tok-w"> </span>-f<span class="tok-w"> </span>var/log/web.log</code></pre></div></div>
<div class="paragraph"><p>Sie erhalten zum Beispiel eine Ausgabe wie diese:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">2024-12-17 10:15:51,742 [40] [cmk.web 2669118] Error converting to legacy rulespec 'ometemp' : name 'migrate_to_password' is not defined</span></code></pre></div></div>
<div class="paragraph"><p>Überprüfen Sie die Syntax Ihrer Datei <code>rulesets/special_agent.py</code>.
Kontrollieren Sie, ob Sie alle benötigten Bibliotheken berücksichtigt und alle Variablen importiert haben.
Schauen Sie nach, ob alle Einrückungen korrekt sind und überprüfen Sie die gesamte Syntax.</p></div>
<div class="admonitionblock tip"><table><tr>
<td class="icon"><img src="../images/icons/tip.png" alt="Tip"></td>
<td class="content"><div class="paragraph"><p>War Ihre Regel vorher in Checkmk sichtbar und ist nun - nach einer Änderung an der Regelkonfiguration - plötzlich verschwunden, so
bemerken Sie dies nur, wenn Sie bestehende Regeln anpassen oder neue Regeln erstellen wollen.
Im Monitoring bestehender Services wird sich das Problem nicht auswirken.</p></div></td>
</tr></table></div>
</div>
<div class="sect2">
<h3 id="heading_activate_changes">
<span class="hidden-anchor sr-only" id="activate_changes"></span>4.3. Fehlermeldung bei der Aktivierung von Änderungen</h3>
<div class="paragraph"><p>Möglicherweise gibt es auch ein Problem in der Aufrufkonfiguration oder am eigentlichen Spezialagenten.
Dies wird zum Beispiel sichtbar, weil beim <span class="guihint">Activate changes</span> ein gelber Warnhinweis angezeigt wird.</p></div>
<div class="paragraph"><p>Überprüfen Sie dann die Datei <code>server_side_calls/special_agent.py</code> entsprechend der Angaben aus der Fehlermeldung.
Behebt das den Fehler nicht, so können Sie wieder auf der Kommandozeile nach Fehlermeldungen suchen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>cmk<span class="tok-w"> </span>-d<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--debug<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>less</code></pre></div></div>
<div class="paragraph"><p>Sie bekommen - nach einem Augenblick Geduld - eine Ausgabe ähnlich der folgenden (gekürzte Fassung):</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-go">Traceback (most recent call last):</span>
<span class="tok-go">  File "/omd/sites/devtest/bin/cmk", line 118, in &lt;module&gt;</span>
<span class="tok-go">    exit_status = modes.call(mode_name, mode_args, opts, args)</span>
<span class="tok-go">                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/modes/__init__.py", line 70, in call</span>
<span class="tok-go">    return handler(*handler_args)</span>
<span class="tok-go">           ^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/modes/check_mk.py", line 562, in mode_dump_agent</span>
<span class="tok-go">    for source in sources.make_sources(</span>
<span class="tok-go">                  ^^^^^^^^^^^^^^^^^^^^^</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/sources/_builder.py", line 407, in make_sources</span>
<span class="tok-go">    return _Builder(</span>
<span class="tok-go">           ^^^^^^^^^</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/sources/_builder.py", line 140, in __init__</span>
<span class="tok-go">    self._initialize_agent_based()</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/sources/_builder.py", line 198, in _initialize_agent_based</span>
<span class="tok-go">    special_agents = tuple(make_special_agents())</span>
<span class="tok-go">                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/sources/_builder.py", line 187, in make_special_agents</span>
<span class="tok-go">    for agent_data in special_agent.iter_special_agent_commands(agentname, params):</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/server_side_calls/_special_agents.py", line 139, in iter_special_agent_commands</span>
<span class="tok-go">    yield from self._iter_commands(special_agent, params)</span>
<span class="tok-go">  File "/omd/sites/devtest/lib/python3/cmk/base/server_side_calls/_special_agents.py", line 115, in _iter_commands</span>
<span class="tok-go">    for command in special_agent(processed.value, self.host_config):</span>
<span class="tok-go">  File "/omd/sites/devtest/local/lib/python3/cmk_addons/plugins/ometemp/server_side_calls/special_agent.py", line 13, in _agent_arguments</span>
<span class="tok-go">    "--user", params['bulla'],</span>
<span class="tok-go">              ~~~~~~^^^^^^^^^</span>
<span class="tok-go">KeyError: 'bulla'</span></code></pre></div></div>
<div class="paragraph"><p>Interessant sind nun vor allem die letzten Zeilen der Ausgabe:
In der Datei <code>server_side_calls/special_agent.py</code> wird wohl versucht, auf ein Element des Dictionaries <code>params</code> zuzugreifen, das nicht existiert.</p></div>
</div>
<div class="sect2">
<h3 id="heading_agent_output">
<span class="hidden-anchor sr-only" id="agent_output"></span>4.4. Agentenausgabe überprüfen</h3>
<div class="paragraph"><p>Eine weitere Fehlerquelle kann es sein, dass Ihr Check-Plugin keine Daten ausgibt.
Auch dies können Sie auf der Kommandozeile überprüfen:</p></div>
<div class="listingblock"><div class="content"><pre class="pygments highlight"><code data-lang="console"><span></span><span class="tok-gp">OMD[mysite]:~$ </span>cmk<span class="tok-w"> </span>-d<span class="tok-w"> </span>localhost<span class="tok-w"> </span>--debug<span class="tok-w"> </span><span class="tok-p">|</span><span class="tok-w"> </span>less</code></pre></div></div>
<div class="paragraph"><p>Erhalten Sie hier statt eines Strings mit den aktuellen Messdaten eine Fehlermeldung, so nutzen Sie diese zur Korrektur.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="heading_files">
<span class="hidden-anchor sr-only" id="files"></span>5. Dateien und Verzeichnisse</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="heading__verzeichnisse">
<span class="hidden-anchor sr-only" id="_verzeichnisse"></span>5.1. Verzeichnisse</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 60%;">
<col style="width: 40%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Pfad</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/lib/python3/cmk_addons/plugins/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Basisverzeichnis zur Ablage von Plugin-Dateien.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/lib/python3/cmk_addons/plugins/&lt;plug-in_family&gt;/libexec/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablageort für ausführbare Dateien.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/lib/python3/cmk_addons/plugins/&lt;plug-in_family&gt;/rulesets/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablageort für Regelsatzdateien.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/lib/python3/cmk_addons/plugins/&lt;plug-in_family&gt;/server_side_calls/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablageort für Dateien zur Aufrufkonfiguration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/lib/python3/cmk_addons/plugins/&lt;plug-in_family&gt;/agent_based/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablageort für agentenbasierte Check-Plugins.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/share/check_mk/agents/special/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hier sind die mitgelieferten Spezialagenten installiert.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/share/check_mk/agents/special/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablage der von Ihnen modifizierten Spezialagenten.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/local/bin/</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ablage von eigenen Programmen oder Skripten, die im Suchpfad sein sollen und ohne Pfadangabe direkt ausgeführt werden können. Ist ein Programm sowohl in <code>~/bin/</code> als auch in <code>~/local/bin/</code>, hat letzteres Vorrang.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="heading_avail_integration">
<span class="hidden-anchor sr-only" id="avail_integration"></span>5.2. Verfügbare Gruppierungen in <span class="guihint">Other integrations</span>
</h3>
<table class="table-responsive table-bordered table tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead><tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Bedeutung</th>
</tr></thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>APPLICATIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Anwendungs-Monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLOUD</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cloud-Monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONFIGURATION_DEPLOYMENT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Konfigurationsmanagementsystemen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DATABASES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Datenbanken</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GENERAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>Alles, was nicht irgendwo anders reinpasst</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENVIRONMENTAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Umwelt und Umgebung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LINUX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring des Linux-Betriebssystems</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NETWORKING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Netzwerk-Monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MIDDLEWARE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Middleware</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>NOTIFICATIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Benachrichtigungssystemen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>OPERATING_SYSTEM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Betriebssystem-Monitoring allgemein</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PERIPHERALS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Peripheriegeräten</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POWER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring der Stromversorgung</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVER_HARDWARE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Serverhardware</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STORAGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Speichersystemen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SYNTHETIC_MONITORING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Synthetic Monitoring</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>VIRTUALIZATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring von Virtualisierungsumgebungen</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WINDOWS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Monitoring des Windows-Betriebssystems</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div></main><div id="toc" class="toc2">
<div id="toctitle">Auf dieser Seite</div>
<ul class="sectlevel1">
<li><a href="#intro">1. Einleitung</a></li>
<li>
<a href="#minimal_agent">2. Einen „minimalen“ Spezialagenten erstellen</a><ul class="sectlevel1">
<li><a href="#prepare_env">2.1. Vorbereitung der Umgebung</a></li>
<li><a href="#special_agent">2.2. Der Spezialagent</a></li>
<li><a href="#rule_config">2.3. Die Regelkonfiguration</a></li>
<li><a href="#call_config">2.4. Die Aufrufkonfiguration</a></li>
<li><a href="#first_test">2.5. Der erste Test</a></li>
</ul>
</li>
<li>
<a href="#complex_example">3. Ein komplexeres Beispiel: Ein vollständiger Wetter-Service</a><ul class="sectlevel1">
<li><a href="#env_prep">3.1. Vorbereitung der Umgebung</a></li>
<li><a href="#special_agent2">3.2. Der Spezialagent</a></li>
<li>
<a href="#rule_config2">3.3. Die Regelkonfiguration</a><ul class="sectlevel2"><li><a href="#use_pwd">Erweiterung: Passwörter verwenden</a></li></ul>
</li>
<li>
<a href="#call_config2">3.4. Die Aufrufkonfiguration</a><ul class="sectlevel2"><li><a href="#_passw%C3%B6rter_verwenden">Passwörter verwenden</a></li></ul>
</li>
<li><a href="#check_plugin">3.5. Das Check-Plugin</a></li>
</ul>
</li>
<li>
<a href="#detect_errors">4. Fehler beheben</a><ul class="sectlevel1">
<li><a href="#serv_warn">4.1. Warnhinweise in der Service-Übersicht des Hosts</a></li>
<li><a href="#incompatibles">4.2. Die Regel ist verschwunden oder ein Warnhinweis ist sichtbar</a></li>
<li><a href="#activate_changes">4.3. Fehlermeldung bei der Aktivierung von Änderungen</a></li>
<li><a href="#agent_output">4.4. Agentenausgabe überprüfen</a></li>
</ul>
</li>
<li>
<a href="#files">5. Dateien und Verzeichnisse</a><ul class="sectlevel1">
<li><a href="#_verzeichnisse">5.1. Verzeichnisse</a></li>
<li><a href="#avail_integration">5.2. Verfügbare Gruppierungen in <span class="guihint">Other integrations</span></a></li>
</ul>
</li>
</ul>
</div>
<script src="../../assets/js/manifest.js?id=7db827d654313dce4250"></script>
<script src="../../assets/js/vendor.js?id=581a3d4a61b7156d04df"></script>
<script src="../../assets/js/app.js?id=959ccd04b1f8b7b78c5e"></script>
<script src="../../assets/js/lunr.js"></script>
<script src="../../assets/js/lunr.stemmer.support.js"></script>
<script src="../../assets/js/lunr.de.js"></script>
<script src="../lunr.index.de.js"></script>
<script src="../../assets/js/lunr.client.js"></script>
</body>
</html>

